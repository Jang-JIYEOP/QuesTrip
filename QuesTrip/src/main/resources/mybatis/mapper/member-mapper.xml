<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="MemberMapper">

<insert id="join">
	INSERT INTO MEMBER (
	    NO
	    , MEMBER_TITLE_NO
	    , NICK
	    , ICON_NO
	    , ID
	    , PWD
	    , EMAIL
	    , POINT
	    ) 
	VALUES (
	    SEQ_MEMBER_NO.NEXTVAL
	    , 1	
	    , #{nick}
	    , 1
	    , #{id}
	    , #{pwd}
	    , #{email}
	    , 500
	    )
</insert>
	
<select id="login" resultType="com.kh.questrip.member.vo.MemberVo">
	SELECT 
	    NO
	    ,MEMBER_TITLE_NO
	    ,ICON_NO
	    ,ID
	    ,PWD
	    ,NICK
	    ,EMAIL
	    ,POINT
	    ,ENROLL_DATE
	    ,DEL_YN
	FROM MEMBER
	WHERE 
	    DEL_YN = 'N'
	<if test="no ==null || no == ''">
		AND ID = #{id}
	    AND PWD = #{pwd}
	</if>

	<if test="no !=null and no != ''">
		AND NO = #{no}
	</if>
		
	
</select>

<select id="dupCheck" resultType="Integer">
	SELECT
		COUNT(*) AS count
	FROM MEMBER
	WHERE 
	DEL_YN = 'N'
	<if test="id != null and id != ''">
		AND ID = #{id}
	</if>
	<if test="nick != null and nick != ''">
		AND NICK = #{nick}
	</if>
	
</select>


</mapper>